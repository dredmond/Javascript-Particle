<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <title>HTML 5 Particle Engine</title>
        <link rel="stylesheet" href="css/baseGameStyles.css" />
        <style>
        	#body {
        		padding: 0;
        		margin: 0;
        	}
        	
        	.contentWrapper {
        		width: 1024px; 
        		margin: auto; 
        		clear: both;
        	}
        </style>
        <script type="text/javascript" src="js/particle.js"></script>
        <script type="text/javascript" src="js/emitter.js"></script>
        <script type="text/javascript" src="js/debugConsole.js"></script>
    </head>
    <body id="body">
        <br/><br/>
        <div class="contentWrapper">
            <canvas id="gameCanvas" width="800" height="600"></canvas>
            <div id="debugConsole">Debug Console:<br /></div>
            <div style="clear:both"></div>
        </div>

        <!-- Execute Scripts! -->
        <script type="text/javascript">
            debugConsole.init('debugConsole');
            var canvas = document.getElementById('gameCanvas');
            var canAnimate = true;

            if (canvas && canvas.getContext) {
                var ctx = canvas.getContext('2d');

                var e = new Emitter();
                e.init(null);
                debugConsole.write('Particle Engine Started.');
                
                debugConsole.write('Testing Alpha Channels');
                setInterval('AlphaTest()', 1);
                
            } else {
                debugConsole.write('Your browser does not support the HTML 5 Canvas.');
            }

            function AlphaTest() {
                if (canAnimate) {
                    // Set can animate to false so we don't get multiple calls.
                    canAnimate = false;

                    // Clear Screen
                    ctx.clearRect(0, 0, 800, 600);

                    // Do emitter update
                    e.update();

                    // Do emitter draw
                    e.draw(ctx);

                    // Create a test particle (ignore this code)
                    var p = new Particle();
                    p.setLocation(40, 40);
                    p.draw(ctx, null);

                    canAnimate = true;
                }
            }
        </script>
    </body>
</html>